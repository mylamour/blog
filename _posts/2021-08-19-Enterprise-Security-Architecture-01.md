---
layout: post
title: 再谈安全架构《一》
categories: 安全工程师
kerywords: 应用架构 安全架构 数据安全 企业安全架构 架构设计 业务驱动
tags: 安全架构
---

# 前言
早在5月份的时候就已经决定去新开几篇安全架构的文章，不过后来却只写一小部分。因为长进有限，外加上沉淀不足，思路受阻至今。直到最近，感觉七七八八学习了不少，翻翻《Enterprise Security Architecture》发现已经看了几个月了。遂将笔记整理成文。

之前的《什么是安全架构》三篇中主要是以经验出发，属于自下而上的套路，总结的是由实战经验中得来的可行方法。这次将以《Enterprise Security Architecture》为参考，自顶向下的看一下从方法论到实际建设的过程。其实越看书，越发现两者是互相印证的。

# 企业安全架构方法论

## 概念
![image](https://user-images.githubusercontent.com/12653147/130034048-e75b342d-f4f2-4651-8df3-aa19790e3ea0.png)
> 任何普适性的方法大都也需要因地制宜。总之，读完此书之后很好的帮助了我总结了之前总结......

因为每个阶段又有许多需要单独考虑的地方，我根据书中内容整理了一份表格，同时在gist上贴了份**文字版**[摘要在此](https://gist.github.com/mylamour/64ef30331cda95f08570f11ce135e171):

![image](https://user-images.githubusercontent.com/12653147/130034780-a64ea58f-ecaf-4d96-9f45-9dc208855969.png)

**注：下文所有截图均来自原书** 

总的来说是三个阶段(Phase)，六个层级(Layer)。 
三个阶段是策略/计划->设计->运营。 六个阶段分别为:
* 上下文安全架构
* 概念安全架构
* 逻辑安全架构
* 实际安全架构
* 组件安全架构
* 运营安全架构

不过在处理顺序上一般在制定Operational Security Architecture的同时应该是已经考虑到了Logical，Physical的Security Architecture，以及可能遇到的Component上的问题。

![0112_001](https://user-images.githubusercontent.com/12653147/130037905-a48e043f-5b05-4140-acd5-a685224aa823.jpg)

> 也就是说涉及到任何要输出的东西时，Mange & Measure 是潜在发生的。可能来自自己，可能来自别人/团队。

下图以Directory Services为例展示了6 Layer是如何形成的。

![0131_002](https://user-images.githubusercontent.com/12653147/130038184-78723488-2eec-4347-b784-dd993b238623.jpg)

## 0-1

这里有两张图，分别展示了这套框架的运行逻辑。第一张是指整个三个阶段（可抽象一下）商业策略是是怎么从受到不同影响的输入(Input),来自期望目标(Goals)，市场，财务，产品原材料等反馈到安全策略上，以及从Logical -> Physical过程中的考虑的一些案例（case）和因素,直至形成可信的运营。

![0127_001](https://user-images.githubusercontent.com/12653147/130038090-fcb8797b-379d-41b7-989e-c4fb6f8b5d3a.jpg)

至于有的地方是否是过时的，我们可以暂时不用细究。方法论迁移的套路里细节一般影响不大。例如我们甚至也可以套用阴阳学说在安全建设里面（以下是胡说的），例如：

* 对立制约
> 攻防双方的对立， 到了企业内部，对于关键的权限，分权，分到不同的部门，也是制约吧。企业外部，企业与监管。都是互相制约的。虽然不一定是对立。就如企业内的红蓝对抗，是对立的吗？是也不是，之后还不是要一起坐下来复盘，为什么引进Blue Team还不是提前发现风险，以攻促防。

* 交感互藏
> 攻中有防，防中有攻。你搞了个封禁，攻击方基础设施都已经自动化了。攻击方打进来了，你又弄了个蜜罐/网啥的。企业内部的话，红蓝双方也算是内外相成吧。新技术的诞生也带来新的风险，搞新的安全

* 互根互用
> 没有攻击就没有防守，但没有防盗不一定没有盗。甲方买乙方的设备，用乙方的技术支持，回头甲方又出来搞个企业。一起混生态摸水摸鱼的混，倒也不是个例。当然好的说法肯定是互相促进，共同成长。企业内部不也是弄出中台，弄出平台，弄出x,y,z元素的集合，然后产品线有需求自取元素。

* 消长平衡
> 讲的是势， 攻防双方就是此消彼长，此长彼消的。同样，团队协作，你强势项目就不一定好推，你弱老板可能又会帮你Push。打的狠了防不住了，技术不行，警察介入。防的好，业务ok，来搞的人就多点。
* 相互转化
> 甲方的去了乙方，乙方的去了甲方。也有人喜欢说未知攻焉知防，没有视角怎么去防御。

但是这些东西能扯能说，能用来分析问题，开拓思维。但却不是一个好的方法去落地实际的设计。需要落地解决方案的同时需要考虑现实情况中的负责度，一一去解决，评估管理成本、预算等等。以相对严谨的形式去实施，而不是以混的方式。


# 总结
其实并不难发现，在之前来自实践的总结，和书本的企业安全体系建设方法论有着共通之处。虽然这本书是05年出版，但是放到今天仍不失作为一本案头书。尤其是对刚从事甲方安全建设的工友（哈哈，从事信息传输、软件和信息技术服务业的新生代农民工应该具有乐天、知命、不忧的能力) 而言，着实能够帮助自身提升。这本书并不一定需要全部看完，对于一些专家而言，甚至通过浏览目录就能知道个大概了。他最大的作用是能够帮助你构建大图，知道什么东西在什么地方什么时候该做什么。


# 参考
* [Enterprise Security Architecture](https://www.amazon.com/Enterprise-Security-Architecture-Business-Driven-Approach-ebook/dp/B00UVAQ75G)
* [架构师手册](https://tonydeng.github.io/architect-manual/ch1/1.1.html)



<!-- ![0117_001](https://user-images.githubusercontent.com/12653147/130038046-89a065ea-248f-4ad4-96e0-3efd91ded825.jpg) -->
<!-- ![0294_001](https://user-images.githubusercontent.com/12653147/130038412-39a8b77a-f1be-4659-a053-cbbd9ae31b19.jpg) 策略管理里的好图 -->
